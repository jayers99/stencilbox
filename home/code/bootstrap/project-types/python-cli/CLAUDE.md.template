# CLAUDE.md

This file provides guidance to Claude Code when working with this codebase.

## Project Overview

**Name:** {{PROJECT_NAME}}
**Description:** {{PROJECT_DESCRIPTION}}
**Type:** Python CLI

## Development Commands

```bash
# Install dependencies
pipenv install --dev

# Run tests
pipenv run pytest

# Run tests with coverage
pipenv run pytest --cov=src --cov-report=html

# Run linter
pipenv run ruff check .

# Run type checker
pipenv run mypy src/

# Run the CLI
pipenv run python -m {{PROJECT_NAME}}
```

## Architecture

This project follows Domain-Driven Design (DDD) with three layers:

```
src/{{PROJECT_NAME}}/
├── cli.py              # Entry point, argparse
├── domain/             # Pure business logic, no external dependencies
├── application/        # Use cases and orchestration
└── infrastructure/     # Cloud SDKs, I/O, configuration
```

- **domain/** - Pure Python, no imports from other layers, fully testable without mocks
- **application/** - Orchestrates domain objects, depends only on domain
- **infrastructure/** - External integrations, implements interfaces defined in domain

## AI Team Agreement

### Development Practices

- **TDD Always**: Red-Green-Refactor cycle. Never write implementation without a failing test first.
- **One Story at a Time**: WIP limit of 1. Complete current work before starting new.
- **Small Commits**: Commit after each meaningful change. Each commit should leave codebase working.

### Branch & PR Workflow

- **Branch Naming**: `feature/STORY-N-description` or `bugfix/BUG-N-description`
- **PR Flow**:
  1. Claude creates branch and PR
  2. GitHub Copilot auto-reviews
  3. Claude polls for review completion (every 30 seconds)
  4. Claude addresses Copilot comments
  5. Human runs UAT and approves
  6. Squash merge, delete branch
  7. Claude creates semver release

### Commit Messages

Format: `<type>: <short description>`

| Type | Use For |
|------|---------|
| `feat` | New feature |
| `fix` | Bug fix |
| `test` | Adding/updating tests |
| `refactor` | Code change without feature/fix |
| `docs` | Documentation only |
| `chore` | Maintenance, dependencies |

### Communication Signals

**Human to AI:**
- **"Stop"** - Halt immediately, wait for instructions
- **"Pause"** - Checkpoint progress, summarize state, wait
- **"Clarify"** - Need to understand before proceeding

**AI to Human:**
- Signal when confused or blocked
- Ask before making assumptions
- Propose plans before executing
- Never proceed when uncertain about destructive actions

### Definition of Done

- [ ] Code compiles/runs without errors
- [ ] All tests pass (unit + integration)
- [ ] No linter errors or warnings
- [ ] Code reviewed (Copilot + Human)
- [ ] Documentation updated (if user-facing changes)
- [ ] Commit message follows convention
- [ ] PR includes UAT instructions

### Releases

After every merged PR:
- `fix:` commits = PATCH bump (1.0.0 -> 1.0.1)
- `feat:` commits = MINOR bump (1.0.0 -> 1.1.0)
- Breaking changes = MAJOR bump (1.0.0 -> 2.0.0)

## Key Files

| File | Purpose |
|------|---------|
| `BACKLOG.md` | Current stories and tasks |
| `CHANGELOG.md` | Release history |
| `docs/requirements.md` | What we're building |

## Session Startup

When starting a new session:

```
Read CLAUDE.md, then BACKLOG.md, then recent git log.
Summarize where we are and ask what to work on.
```
